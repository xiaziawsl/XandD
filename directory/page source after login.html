<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="format-detection" content="telephone=no">
                <meta name="viewport" content="width=device-width initial-scale=1,user-scalable = 0">
                <title>西北农林科技大学健康打卡</title>
        <link type="image/png"  href='/backend/img/logo.png' rel="shortcut icon">
        <link rel="stylesheet" href="/wap/css/common.css">
        <link href="/widgets/photoSwipe/css/photoswipe.css" rel="stylesheet">
        <link href="/widgets/photoSwipe/css/default-skin.css" rel="stylesheet">

        <!-- <style type="text/css">
            html{
                -webkit-filter: grayscale(100%);
                filter: grayscale(100%);
                filter: gray;
            }
        </style> -->

        <link href="https://app.nwafu.edu.cn/wap/ncov/font/iconfont.css" rel="stylesheet"><link href="https://app.nwafu.edu.cn/wap/ncov/css/default.main.css" rel="stylesheet"><link href="https://app.nwafu.edu.cn/wap/ncov/css/default-skin.css" rel="stylesheet"><link href="https://app.nwafu.edu.cn/wap/ncov/css/iosselect.css" rel="stylesheet"><link href="https://app.nwafu.edu.cn/wap/ncov/css/wcalendar.css" rel="stylesheet"><link href="https://app.nwafu.edu.cn/wap/ncov/css/mescroll.min.css" rel="stylesheet">            <style>
        .wapcf-btn, .wapat-btn {
            background: #4285f4;
        }
        .wapcf-btn-qx {
            background: #d0d0d0 !important;
        }
    </style>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=729923f88542d91590470f613adb27b5&plugin=AMap.Driving"></script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?48b682d4885d22a90111e46b972e3268";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
        <script src="/thirdparty/nifty/js/jquery.min.js"></script>
                <script src="/thirdparty/vuejs/v2.1.10/vue.min.js"></script>
        <script src="/wap/js/common.js"></script>
        <script src="/js/face.js"></script>
        <script src="/widgets/photoSwipe/js/photoswipe.min.js"></script>
        <script src="/widgets/photoSwipe/js/photoswipe-ui-default.min.js"></script>
                        <!--upload, datepicker, ueditor, baidutemplate, jquery-ui, -->
    </head>
    
    <body class="">
                
    <div class="item-buydate form-detail2" style="display: block;">
        <div>
            <div class="form-detail form-detail2 item-buydate">
                <section>
                    <div class="form-detail-img"><img src="https://imgapp.nwafu.edu.cn/image/9/1845253f9d0c96cf8076930f61b827ae.jpg" class="detail-img"></div>
                    <div class="form-detail-desc">
                        <div>
                            <div><p>
                                    填报要求：管理员代打时如被代打人在杨凌请选陕西省、咸阳市（只有两级）。教工在杨凌也请选在校，学生根据实际。个人填报每天上午12:00前，上报管理员每天13:00前提交汇总，必须如实及时填报，确保填报不漏一户、不漏一人。
<br>返校14日内学生进行两次健康打卡，体温监测时间如下：<br>
晨检时间为7：00—8：00，当日9:00前提交监测数据；午检时间为12：30—14：00，当日15:00前提交监测数据。<br>
原则上不得代打卡。
                                </p></div>
                        </div>
                    </div>
                    <header class="tabbar">
                        <a href="javascript:;" class="tab active">每日上报</a>
                        <a href="/ncov/wap/default/recently" class="tab">基本信息</a>
                    </header>
                    <div class="form-detail-desc-line"></div>
                    <div class="form">
                        <ul>
                            <li>
                                <div class="text">
                                    <span>今日日期<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                    <input v-model="date" readonly type="text" placeholder=""></div>
                            </li>
                            <li>
                                <div class="text">
                                    <span>姓名<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                    <input v-model="realname" readonly type="text" placeholder=""></div>
                            </li>
                            <li>
                                <div class="text">
                                    <span>学工号<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                    <input v-model="number" readonly type="text" placeholder=""></div>
                            </li>
                            <li>
                                <div name="sfzx" class="radio"><span>今日是否在校？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="setSfzx(1)"><span :class="{active: info.sfzx==1}"><i></i></span> <span>是</span></div>
                                        <div @click="setSfzx(0)"><span :class="{active: info.sfzx==0}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li v-if="showFxyy">
                                <div class="multiText"><span>返校原因<i class="icon iconfont icon-shuoming"></i></span>
                                    <div><textarea v-model="info.fxyy" name="fxyy" rows="" cols="" placeholder=""></textarea></div>
                                </div>
                            </li>

                            <li>
                                <div name="sfzgn" class="radio"><span>所在地点<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="setSfzgn(1)"><span :class="{active: sfzgn==1}"><i></i></span> <span>中国大陆</span></div>
                                        <div @click="setSfzgn(0)"><span :class="{active: sfzgn==0}"><i></i></span> <span>港澳台或国外</span></div>
                                    </div>
                                </div>
                            </li>

                            <li v-show="sfzgn == 1">
                                <div name="area" class="text" style="cursor: pointer" @click="getLocation()">
                                    <span>所在地点<i class="icon iconfont icon-shuoming"></i></span>
                                    <input v-model="info.area" readonly type="text" placeholder="点击获取地理位置"></div>
                            </li>

                            <li>
                                <div name="zgfxdq" class="radio"><span>今日是否在中高风险地区？（中高风险地区信息可通过国务院客户端小程序实时查询）<i class="icon iconfont icon-shuoming"></i></span>
                                    <div>
                                        <div @click="info.zgfxdq=1"><span :class="{active: info.zgfxdq==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.zgfxdq='0'"><span :class="{active: info.zgfxdq===0 || info.zgfxdq==='0'}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li v-if="info.ismoved == 1">
                                <div name="bztcyy" class="radio"><span>当前地点与上次不在同一城市，原因如下<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.bztcyy=2"><span :class="{active: info.bztcyy==2}"><i></i></span> <span>探亲</span></div>
                                        <div @click="info.bztcyy=3"><span :class="{active: info.bztcyy==3}"><i></i></span> <span>旅游</span></div>
                                        <div @click="info.bztcyy=4"><span :class="{active: info.bztcyy==4}"><i></i></span> <span>回家</span></div>
                                        <div @click="info.bztcyy=1"><span :class="{active: info.bztcyy==1}"><i></i></span> <span>其他</span></div>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div name="tw" class="radio"><span>今日体温范围<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.tw=1"><span :class="{active: info.tw==1}"><i></i></span> <span>36℃以下</span></div>
                                        <div @click="info.tw=2"><span :class="{active: info.tw==2}"><i></i></span> <span>36℃~36.5℃</span></div>
                                        <div @click="info.tw=3"><span :class="{active: info.tw==3}"><i></i></span> <span>36.5℃~36.9℃</span></div>
                                        <div @click="info.tw=4"><span :class="{active: info.tw==4}"><i></i></span> <span>36.9℃~37.3℃</span></div>
                                        <div @click="info.tw=5"><span :class="{active: info.tw==5}"><i></i></span> <span>37.3℃~38℃</span></div>
                                        <div @click="info.tw=6"><span :class="{active: info.tw==6}"><i></i></span> <span>38℃~38.5℃</span></div>
                                        <div @click="info.tw=7"><span :class="{active: info.tw==7}"><i></i></span> <span>38.5℃~39℃</span></div>
                                        <div @click="info.tw=8"><span :class="{active: info.tw==8}"><i></i></span> <span>39℃~40℃</span></div>
                                        <div @click="info.tw=9"><span :class="{active: info.tw==9}"><i></i></span> <span>40℃以上</span></div>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div name="sfcxtz" class="radio"><span>今日是否出现发热、乏力、干咳、呼吸困难等症状？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.sfcxtz=1"><span :class="{active: info.sfcxtz==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.sfcxtz=0"><span :class="{active: info.sfcxtz==0}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>
                            <template v-if="info.sfcxtz == 1">
                                <li>
                                    <div name="sfyyjc" class="radio"><span>是否到相关医院或门诊检查？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                        <div>
                                            <div @click="info.sfyyjc=1"><span :class="{active: info.sfyyjc==1}"><i></i></span> <span>是</span></div>
                                            <div @click="info.sfyyjc=0"><span :class="{active: info.sfyyjc==0}"><i></i></span> <span>否</span></div>
                                        </div>
                                    </div>
                                </li>

                                <template  v-if="info.sfyyjc==1">
                                    <li>
                                        <div name="jcjgqr" class="radio"><span>检查结果属于以下哪种情况<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                            <div>
                                                <div @click="info.jcjgqr=1"><span :class="{active: info.jcjgqr==1}"><i></i></span> <span>疑似感染</span></div>
                                                <div @click="info.jcjgqr=2"><span :class="{active: info.jcjgqr==2}"><i></i></span> <span>确诊感染</span></div>
                                                <div @click="info.jcjgqr=3"><span :class="{active: info.jcjgqr==3}"><i></i></span> <span>其他</span></div>
                                            </div>
                                        </div>
                                    </li>

                                    <li v-if="info.jcjgqr == 2 || info.jcjgqr == 1">
                                        <div class="multiText"><span>隔离或诊疗情况<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                            <div><textarea v-model="info.jcjg" name="jcjg" rows="" cols="" placeholder=""></textarea></div>
                                        </div>
                                    </li>

                                    <li v-if="info.jcjgqr == 3">
                                        <div class="multiText"><span>检查结果<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                            <div><textarea v-model="info.jcjg" name="jcjg" rows="" cols="" placeholder=""></textarea></div>
                                        </div>
                                    </li>
                                </template>
                            </template>

                            <li>
                                <div name="sfjcbh" class="radio"><span>今日是否接触无症状感染/疑似/确诊人群？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.sfjcbh=1"><span :class="{active: info.sfjcbh==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.sfjcbh=0"><span :class="{active: info.sfjcbh==0}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>
                            <li v-if="info.sfjcbh==1">
                                <div name="jcbhlx" class="radio"><span>接触人群类型<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.jcbhlx='疑似'"><span :class="{active: info.jcbhlx=='疑似'}"><i></i></span> <span>疑似</span></div>
                                        <div @click="info.jcbhlx='确诊'"><span :class="{active: info.jcbhlx=='确诊'}"><i></i></span> <span>确诊</span></div>
                                    </div>
                                </div>
                            </li>
                            <li v-if="info.sfjcbh==1">
                                <div class="text">
                                    <span>接触时间<i class="icon iconfont icon-shuoming"></i></span>
                                    <input name="jcbhrq" v-model="info.jcbhrq" type="date" placeholder=""></div>
                            </li>

                            <li>
                                <div name="mjry" class="radio"><span>今日是否接触密接人员？<i class="icon iconfont icon-shuoming"></i></span>
                                    <div>
                                        <div @click="info.mjry=1"><span :class="{active: info.mjry==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.mjry='0'"><span :class="{active: info.mjry===0 || info.mjry==='0'}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div name="csmjry" class="radio"><span>近14日内本人/共同居住者是否去过疫情发生场所（市场、单位、小区等）或与场所人员有过密切接触？<i class="icon iconfont icon-shuoming"></i></span>
                                    <div>
                                        <div @click="info.csmjry=1"><span :class="{active: info.csmjry==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.csmjry='0'"><span :class="{active: info.csmjry===0 || info.csmjry==='0'}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div name="sfcyglq" class="radio"><span>是否处于隔离期？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.sfcyglq=1"><span :class="{active: info.sfcyglq==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.sfcyglq=0"><span :class="{active: info.sfcyglq==0}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li v-if="info.sfcyglq==1">
                                <div name="gllx" class="radio"><span>隔离场所<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.gllx='学校家属院'"><span :class="{active: info.gllx=='学校家属院'}"><i></i></span> <span>学校家属院</span></div>
                                        <div @click="info.gllx='学校集中隔离点'"><span :class="{active: info.gllx=='学校集中隔离点'}"><i></i></span> <span>学校集中隔离点</span></div>
                                        <div @click="info.gllx='陕西校外居住地'"><span :class="{active: info.gllx=='陕西校外居住地'}"><i></i></span> <span>陕西校外居住地</span></div>
                                        <div @click="info.gllx='陕西外地区集中隔离点'"><span :class="{active: info.gllx=='陕西外地区集中隔离点'}"><i></i></span> <span>陕西外地区集中隔离点</span></div>
                                    </div>
                                </div>
                            </li>
                            <li v-if="info.sfcyglq==1">
                                <div class="text">
                                    <span>隔离开始时间<i class="icon iconfont icon-shuoming"></i></span>
                                    <input name="glksrq" v-model="info.glksrq" type="date" placeholder=""></div>
                            </li>

                            <li>
                                <div name="sfcxzysx" class="radio"><span>是否有任何与疫情相关的， 值得注意的情况？<i class="icon iconfont icon-shuoming"></i><em></em></span>
                                    <div>
                                        <div @click="info.sfcxzysx=1"><span :class="{active: info.sfcxzysx==1}"><i></i></span> <span>是</span></div>
                                        <div @click="info.sfcxzysx=0"><span :class="{active: info.sfcxzysx==0}"><i></i></span> <span>否</span></div>
                                    </div>
                                </div>
                            </li>

                            <li v-if="info.sfcxzysx==1">
                                <div class="multiText"><span>情况说明<i class="icon iconfont icon-shuoming"></i></span>
                                    <div><textarea v-model="info.qksm" name="qksm" rows="" cols="" placeholder=""></textarea></div>
                                </div>
                            </li>

                            <li>
                                <div class="multiText"><span>其他信息<i style="display: none;" class="icon iconfont icon-shuoming"></i></span>
                                    <div><textarea v-model="info.remark" name="remark" rows="" cols="" placeholder=""></textarea></div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="list-box">
                        <div class="footers"><a @click="confirm()" :class="{'wapcf-btn-qx': hasFlag == 1}" >提交信息</a>
                                                    </div>
                    </div>
                </section>
            </div>
        </div>
    </div>


                    <script type="text/javascript">
                        var def = {"zgfxdq":"0","mjry":"0","csmjry":"0","tw":"1","sfcxtz":"0","sfjcbh":"0","sfcxzysx":"0","qksm":"","sfyyjc":"0","jcjgqr":"0","remark":"","address":"","geo_api_info":"{\"type\":\"complete\",\"position\":{\"Q\":34.285620659723,\"R\":108.06765950520901,\"lng\":108.06766,\"lat\":34.285621},\"location_type\":\"html5\",\"message\":\"Get geolocation success.Convert Success.Get address success.\",\"accuracy\":40,\"isConverted\":true,\"status\":1,\"addressComponent\":{\"citycode\":\"0910\",\"adcode\":\"610403\",\"businessAreas\":[],\"neighborhoodType\":\"\",\"neighborhood\":\"\",\"building\":\"\",\"buildingType\":\"\",\"street\":\"\u897f\u519c\u8def\",\"streetNumber\":\"22\u53f7\u8def\",\"country\":\"\u4e2d\u56fd\",\"province\":\"\u9655\u897f\u7701\",\"city\":\"\u54b8\u9633\u5e02\",\"district\":\"\u6768\u9675\u533a\",\"towncode\":\"610403002000\",\"township\":\"\u674e\u53f0\u8857\u9053\"},\"formattedAddress\":\"\u9655\u897f\u7701\u54b8\u9633\u5e02\u6768\u9675\u533a\u674e\u53f0\u8857\u9053\u897f\u5317\u519c\u6797\u79d1\u6280\u5927\u5b66\u5317\u6821\u533a\u5b66\u751f\u7b2c\u516d\u9910\u5385\",\"roads\":[],\"crosses\":[],\"pois\":[],\"info\":\"SUCCESS\"}","area":"","province":"\u9655\u897f\u7701","city":"","sfzx":"0","sfjcwhry":"0","sfjchbry":"0","sfcyglq":"0","gllx":"","glksrq":"","jcbhlx":"","jcbhrq":"","bztcyy":"","sftjhb":"0","sftjwh":"0","jcjg":"","date":"20220930","uid":"139987","created":1664495918,"jcqzrq":"","sfjcqz":"","szsqsfybl":0,"sfsqhzjkk":0,"sqhzjkkys":"","sfygtjzzfj":0,"gtjzzfjsj":"","created_uid":0,"id":38297565,"gwszdd":"","sfyqjzgc":"","jrsfqzys":"","jrsfqzfy":""};
                var vm = new Vue({
            el: '.form-detail2',
            data: {
                realname: "曾乐桐",
                number: '2022014660',
                date: '2022-09-30',
                info: $.extend({
                    zgfxdq:'',
                    mjry:"",
                    csmjry:""
                }, def),
                oldInfo: {"zgfxdq":"0","mjry":"0","csmjry":"0","tw":"1","sfcxtz":"0","sfjcbh":"0","sfcxzysx":"0","qksm":"","sfyyjc":"0","jcjgqr":"0","remark":"","address":"\u9655\u897f\u7701\u54b8\u9633\u5e02\u6768\u9675\u533a\u674e\u53f0\u8857\u9053\u897f\u5317\u519c\u6797\u79d1\u6280\u5927\u5b66\u5317\u6821\u533a8\u53f7\u6559\u5b66\u697c","geo_api_info":"{\"type\":\"complete\",\"position\":{\"Q\":34.287048068577,\"R\":108.07479627821203,\"lng\":108.074796,\"lat\":34.287048},\"location_type\":\"html5\",\"message\":\"Get geolocation success.Convert Success.Get address success.\",\"accuracy\":25,\"isConverted\":true,\"status\":1,\"addressComponent\":{\"citycode\":\"0910\",\"adcode\":\"610403\",\"businessAreas\":[],\"neighborhoodType\":\"\",\"neighborhood\":\"\",\"building\":\"\",\"buildingType\":\"\",\"street\":\"\u897f\u519c\u8def\",\"streetNumber\":\"22\u53f7\",\"country\":\"\u4e2d\u56fd\",\"province\":\"\u9655\u897f\u7701\",\"city\":\"\u54b8\u9633\u5e02\",\"district\":\"\u6768\u9675\u533a\",\"towncode\":\"610403002000\",\"township\":\"\u674e\u53f0\u8857\u9053\"},\"formattedAddress\":\"\u9655\u897f\u7701\u54b8\u9633\u5e02\u6768\u9675\u533a\u674e\u53f0\u8857\u9053\u897f\u5317\u519c\u6797\u79d1\u6280\u5927\u5b66\u5317\u6821\u533a8\u53f7\u6559\u5b66\u697c\",\"roads\":[],\"crosses\":[],\"pois\":[],\"info\":\"SUCCESS\"}","area":"\u9655\u897f\u7701 \u54b8\u9633\u5e02 \u6768\u9675\u533a","province":"\u9655\u897f\u7701","city":"\u54b8\u9633\u5e02","sfzx":"0","sfjcwhry":"0","sfjchbry":"0","sfcyglq":"0","gllx":"","glksrq":"","jcbhlx":"","jcbhrq":"","bztcyy":"","sftjhb":"0","sftjwh":"0","jcjg":"","date":"20220929","uid":"139987","created":1664455943,"jcqzrq":"","sfjcqz":"","szsqsfybl":"0","sfsqhzjkk":0,"sqhzjkkys":"","sfygtjzzfj":0,"gtjzzfjsj":"","ismoved":"0","created_uid":0,"id":38266951},
                tipMsg: '',
                ajaxLock: false,
                showFxyy: false,
                sfzgn: 1,
                hasFlag: '1',
                setting: {"title":"\u897f\u5317\u519c\u6797\u79d1\u6280\u5927\u5b66\u5065\u5eb7\u6253\u5361","desc":"\u586b\u62a5\u8981\u6c42\uff1a\u7ba1\u7406\u5458\u4ee3\u6253\u65f6\u5982\u88ab\u4ee3\u6253\u4eba\u5728\u6768\u51cc\u8bf7\u9009\u9655\u897f\u7701\u3001\u54b8\u9633\u5e02\uff08\u53ea\u6709\u4e24\u7ea7\uff09\u3002\u6559\u5de5\u5728\u6768\u51cc\u4e5f\u8bf7\u9009\u5728\u6821\uff0c\u5b66\u751f\u6839\u636e\u5b9e\u9645\u3002\u4e2a\u4eba\u586b\u62a5\u6bcf\u5929\u4e0a\u534812:00\u524d\uff0c\u4e0a\u62a5\u7ba1\u7406\u5458\u6bcf\u592913:00\u524d\u63d0\u4ea4\u6c47\u603b\uff0c\u5fc5\u987b\u5982\u5b9e\u53ca\u65f6\u586b\u62a5\uff0c\u786e\u4fdd\u586b\u62a5\u4e0d\u6f0f\u4e00\u6237\u3001\u4e0d\u6f0f\u4e00\u4eba\u3002\n<br>\u8fd4\u682114\u65e5\u5185\u5b66\u751f\u8fdb\u884c\u4e24\u6b21\u5065\u5eb7\u6253\u5361\uff0c\u4f53\u6e29\u76d1\u6d4b\u65f6\u95f4\u5982\u4e0b\uff1a<br>\n\u6668\u68c0\u65f6\u95f4\u4e3a7\uff1a00\u20148\uff1a00\uff0c\u5f53\u65e59:00\u524d\u63d0\u4ea4\u76d1\u6d4b\u6570\u636e\uff1b\u5348\u68c0\u65f6\u95f4\u4e3a12\uff1a30\u201414\uff1a00\uff0c\u5f53\u65e515:00\u524d\u63d0\u4ea4\u76d1\u6d4b\u6570\u636e\u3002<br>\n\u539f\u5219\u4e0a\u4e0d\u5f97\u4ee3\u6253\u5361\u3002","area":"\u9655","sendmsg":"","img":"image\/9\/1845253f9d0c96cf8076930f61b827ae.jpg","copyright":"","notifywid":"92","sms":"0","city":"\u9655\u897f\u7701","notice_num":"2"},
            },
            watch: {
                'info.area': function() {
                    if(!$.isEmptyObject(this.oldInfo) && (this.info.province + this.info.city != this.oldInfo.province + this.oldInfo.city)) {
                        this.info.ismoved = 1;
                    }else {
                        this.info.ismoved = 0;
                    }
                },
                'info.sfzx': function () {
                    if(!$.isEmptyObject(this.oldInfo) && this.oldInfo.sfzx == 0 && this.info.sfzx == 1) {
                        this.showFxyy = true;
                    }else {
                        this.showFxyy = false;
                    }

                }
            },
            created() {
                if(!$.isEmptyObject(this.info)) {
                    if(this.info.province === '国外'){
                        this.sfzgn = 0;
                        this.info.province = '国外';
                        this.info.city = '国外';
                        this.info.area = '国外';
                    }else {
                        this.sfzgn = 1;
                    }
                }else if(!$.isEmptyObject(this.oldInfo) &&  this.info.province === '国外') {
                    this.sfzgn = 0;
                    this.info.province = '国外';
                    this.info.city = '国外';
                    this.info.area = '国外';
                }else{
                    this.sfzgn = 1;
                }
            },
            methods: {
                confirm() {

                    if(this.hasFlag == 1) {
                        wapalert('每天只能填报一次，你已提交过');
                        return false;
                    }
                    if(!this.valid(this.info)) {
                        return false;
                    }
                    wapconfirm('每天只能填报一次，请确认信息是否全部正确？', '确认', '再看看', function () {
                        vm.save();
                    });
                },
                setSfzgn(flag) {
                    if(flag == 0) {
                        this.info.area = '国外';
                        this.info.city = '国外';
                        this.info.province = '国外';
                    }else {
                        var tmp = $.isEmptyObject(this.oldInfo);
                        this.info.area = '';
                        this.info.city = tmp ? '' : this.oldInfo.city;
                        this.info.province = tmp ? '' : this.oldInfo.province;
                    }
                    this.sfzgn = flag;
                },
                setSfzx(flag) {
                    if(!$.isEmptyObject(this.oldInfo) && this.oldInfo.sfzx == 0 && flag == 1 && this.info.sfzx != flag) {
                        wapconfirm('确认已经返校？', '确认', '取消', function () {
                            vm.info.sfzx = 1;
                        }, function () {
                            vm.info.sfzx = 0;
                        });
                        return false;
                    }
                    this.info.sfzx = flag;
                },
                save() {

                    try {
                        var _this = this;

                        if(_this.info.sfjcbh == 0) {
                            _this.info.jcbhlx = '';
                            _this.info.jcbhrq = '';
                        }

                        if(_this.info.sfcyglq == 0) {
                            _this.info.gllx = '';
                            _this.info.glksrq = '';
                        }

                        if(_this.info.sfcxtz == 0) {
                            _this.info.sfyyjc = 0;
                        }
                        if(_this.info.sfyyjc == 0) {
                            _this.info.jcjgqr = 0;
                            _this.info.jcjg = '';
                        }

                        if(_this.info.sfcxzysx ==0) {
                            _this.info.qksm = '';
                        }

                        if(_this.ajaxLock) {
                            wapalert('数据提交中');
                            return false;
                        }
                        _this.ajaxLock = true;
                        waploading('', '数据提交中, 请稍候...');
                        $.ajax({
                            url: '/ncov/wap/default/save',
                            type: 'POST',
                            dataType: 'JSON',
                            data: _this.info,
                            success: function (resp) {
                                _this.ajaxLock = false;
                                waploading('hide');
                                if(resp.e == 0) {
                                    wapalert('提交信息成功');
                                    _this.hasFlag = 1;
                                }else {
                                    wapalert(resp.m);
                                }
                            },
                            error: function () {
                                _this.ajaxLock = false;
                                waploading('hide');
                                wapalert('系统繁忙，请稍后再试！');
                            }
                        });
                    } catch (e) {
                        alert(e);
                    }


                },
                valid(info) {
                    if(info.tw == '' || info.tw > 10) {
                        wapalert('请选择今日体温范围', false, function () {
                            $("[name=tw]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }


                    if(this.showFxyy && info.fxyy == '') {
                        wapalert('请填写返校原因', false, function () {
                            $("[name=fxyy]").focus();
                            $("[name=fxyy]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }

                    if(this.info.ismoved == 1 && this.info.bztcyy == '') {
                        wapalert('请选择不和前一天同城原因', false, function () {
                            $("[name=bztcyy]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }


                    if(info.sfcxtz == 1) {
                        if(info.sfyyjc == 1 && info.jcjgqr == '') {
                            wapalert('请选择检查结果属于以下哪种情况', false, function () {
                                $("[name=jcjgqr]").get(0).scrollIntoView(false);
                            });
                            return false;
                        }
                    }


                    if(info.sfjcbh == 1) {
                        if(info.jcbhlx == '') {
                            wapalert('请选择接触人群类型', false, function () {
                                $("[name=jcbhlx]").get(0).scrollIntoView(false);
                            });
                            return false;
                        }
                        if(info.jcbhrq == '') {
                            wapalert('请选择接触时间', false, function () {
                                $("[name=jcbhrq]").get(0).scrollIntoView(false);
                            });
                            return false;
                        }
                    }


                    if(info.sfcyglq == 1) {
                        if(info.gllx == '') {
                            wapalert('请选择隔离场所', false, function () {
                                $("[name=gllx]").get(0).scrollIntoView(false);
                            });
                            return false;
                        }
                        if(info.glksrq == '') {
                            wapalert('请选择隔离开始时间', false, function () {
                                $("[name=glksrq]").get(0).scrollIntoView(false);
                            });
                            return false;
                        }
                    }


                    if(info.sfcxzysx == 1 && info.qksm== '') {
                        wapalert('情况说明不能为空', false, function () {
                            $("[name=qksm]").focus();
                            $("[name=qksm]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }

                    if(info.area == '') {
                        wapalert('未获取到地理位置', false, function () {
                            $("[name=area]").focus();
                            $("[name=area]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }

                    if(info.zgfxdq === '') {
                        wapalert('请选择今日是否在中高风险地区', false, function () {
                            $("[name=zgfxdq]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }
                    if(info.mjry === '') {
                        wapalert('请选择今日是否接触密接人员', false, function () {
                            $("[name=mjry]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }
                    if(info.csmjry === '') {
                        wapalert('请选择近14日内本人/共同居住者是否去过疫情发生场所（市场、单位、小区等）或与场所人员有过密切接触', false, function () {
                            $("[name=csmjry]").get(0).scrollIntoView(false);
                        });
                        return false;
                    }

                    return true;
                },
                locatComplete(res) {
                    waploading('hide');
                    vm.info.geo_api_info = JSON.stringify(res);
                    vm.info.address = res.formattedAddress;
                    vm.info.area = res.addressComponent.province + ' ' + res.addressComponent.city + ' ' + res.addressComponent.district;
                    vm.info.province = res.addressComponent.province;
                    vm.info.city = res.addressComponent.city;
                    if($.trim(vm.info.city) == '' && ['北京市','上海市','重庆市','天津市'].indexOf(vm.info.province) > -1) {
                        vm.info.city = vm.info.province;
                    }
                },
                locatError(res) {
                    waploading('hide');
                    vm.info.geo_api_info = JSON.stringify(res);
                    vm.info.address = '';
                    vm.info.area = '';
                    vm.info.province = '';
                    vm.info.city = '';
                    $.ajax({
                        url: '/ncov/wap/default/save-geo-error',
                        dataType: 'JSON',
                        type: 'POST',
                        data: {error: JSON.stringify(res)},
                        success(res) {

                        },
                        error() {

                        }
                    });
                    wapalert('获取位置信息失败');
                },
                getLocation(flag) {
                    mapObj = new AMap.Map('iCenter');
                    mapObj.plugin('AMap.Geolocation', function () {
                        geolocation = new AMap.Geolocation({
                            enableHighAccuracy: true,//是否使用高精度定位，默认:true
                            timeout: 10000,          //超过10秒后停止定位，默认：无穷大
                            maximumAge: 0,           //定位结果缓存0毫秒，默认：0
                            convert: true,           //自动偏移坐标，偏移后的坐标为高德坐标，默认：true
                            showButton: true,        //显示定位按钮，默认：true
                            buttonPosition: 'LB',    //定位按钮停靠位置，默认：'LB'，左下角
                            buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
                            panToLocation: false,     //定位成功后将定位到的位置作为地图中心点，默认：true
                            zoomToAccuracy:false      //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
                        });
                        mapObj.addControl(geolocation);
                        !flag && waploading('show', '获取地理位置中...');
                        geolocation.getCurrentPosition();
                        AMap.event.addListener(geolocation, 'complete', vm.locatComplete);//返回定位信息
                        AMap.event.addListener(geolocation, 'error', vm.locatError);      //返回定位出错信息
                    });
                }
            }
        });

        if(vm.info.area) {
            vm.getLocation(1);
        }

    </script>
                    <div id="gallery" class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="pswp__bg"></div>

            <div class="pswp__scroll-wrap">

                <div class="pswp__container">
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                </div>

                <div class="pswp__ui pswp__ui--hidden">

                    <div class="pswp__top-bar">

                        <div class="pswp__counter"></div>

                        <button class="pswp__button pswp__button--close"></button>

                        <div class="pswp__preloader">
                            <div class="pswp__preloader__icn">
                                <div class="pswp__preloader__cut">
                                    <div class="pswp__preloader__donut"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                        <div class="pswp__share-tooltip">

                        </div>
                    </div>

                    <button class="pswp__button pswp__button--arrow--left"></button>
                    <button class="pswp__button pswp__button--arrow--right"></button>
                    <div class="pswp__caption">
                        <div class="pswp__caption__center">
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </body>
</html>
